<!DOCTYPE html>
<html>

<head>
  <title>Destination Search</title>
</head>

<body>
  <title>Destination Search</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
    }

    #search-form {
      text-align: center;
      margin-bottom: 20px;
    }

    #search-input {
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    #results-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }

    .destination-card {
      width: 300px;
      margin: 10px;
      padding: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      border-radius: 4px;
      background-color: #f9f9f9;
    }

    .destination-card h2 {
      margin-top: 0;
    }

    .destination-card p {
      margin-bottom: 8px;
    }

    .destination-card a {
      display: inline-block;
      margin-top: 8px;
      color: #007bff;
      text-decoration: none;
    }

    .destination-card img.thumbnail {
      width: 100%;
      border-radius: 4px;
      margin-top: 10px;
    }
  </style>
  </head>

  <body>
    <h1>Destination Search</h1>
    <form id="search-form">
      <label for="search-input">Search:</label>
      <input type="text" id="search-input" placeholder="Enter a destination">
      <button type="submit">Search</button>
    </form>
    <div id="results-container"></div>

    <script>
      var searchForm = document.getElementById('search-form');
      var searchInput = document.getElementById('search-input');
      var resultsContainer = document.getElementById('results-container');

      searchForm.addEventListener('submit', function (event) {
        event.preventDefault(); // Menghentikan pengiriman formulir

        var searchTerm = searchInput.value;

        // Menghapus hasil pencarian sebelumnya
        resultsContainer.innerHTML = '';

        // Melakukan pencarian menggunakan API
        var apiURL = 'https://api-dot-balimate-dev.et.r.appspot.com/destinations/search?q=' + searchTerm;

        var xhr = new XMLHttpRequest();
        xhr.open('GET', apiURL, true);
        xhr.onload = function () {
          if (xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            var destinations = data.data;

            if (destinations.length === 0) {
              resultsContainer.textContent = 'No results found.';
            } else {
              for (var i = 0; i < destinations.length; i++) {
                var destination = destinations[i];

                var destinationElement = document.createElement('div');
                destinationElement.innerHTML = `
                                <h2>${destination.place_name}</h2>
                                <p>${destination.description}</p>
                                <p>Weekend/Holiday Price: ${destination.weekend_holiday_price}</p>
                                <p>Weekday Price: ${destination.weekday_price}</p>
                                <p>Address: ${destination.alamat}</p>
                                <a href="${destination.maps_url}" target="_blank">View on Maps</a>
                                <img class="thumbnail" src="${destination.thumbnail_url}" alt="Thumbnail">
                                
                            `;

                resultsContainer.appendChild(destinationElement);
              }
            }
          } else {
            console.log('Request failed. Status:', xhr.status);
          }
        };
        xhr.onerror = function () {
          console.log('Request failed. Check your network connection.');
        };
        xhr.send();
      });
    </script>
  </body>

</html>